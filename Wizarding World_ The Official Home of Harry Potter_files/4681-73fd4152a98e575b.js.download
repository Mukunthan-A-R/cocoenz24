(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4681],{70951:function(e,n,t){"use strict";t(67294);var a=t(80054),r=t(80818),l=t(4055),o=t(14038),i=t.n(o),s=t(85893),c=function(e){var n,t,o=e.content,c=e.analyticsParams,u=e.compact,d=o.displayTitle,_=o.mainImage,p=o.tags,m=o.externalId,v=o.url,f=o.contentTypeId,x=o.eyebrow,h=o.label,g="article"===f?(0,l.QS)(p||[],m):v,b=c.verticalIndex,j=c.horizontalIndex;return(0,s.jsxs)(a.Z,{className:u?i().compact:"",href:g,onClick:function(){(0,r.uH)({destination_url:g,label:d,location:"Tile",vertical_index:b,horizontal_index:j,content_name:d},o)},children:[(0,s.jsx)("div",{className:i().imageWrapper,children:(0,s.jsx)("img",{className:i().image,src:"".concat(null===_||void 0===_||null===(n=_.image)||void 0===n||null===(t=n.file)||void 0===t?void 0:t.url,"?w=370&h=210&fit=fill"),alt:"Content"})}),(0,s.jsxs)("div",{className:i().info,children:[(0,s.jsx)("div",{className:i().eyebrow,children:x}),(0,s.jsx)("div",{className:i().title,children:d||h})]}),(0,s.jsx)("div",{className:i().footer})]})};c.defaultProps={compact:!1,analyticsParams:{}},n.Z=c},64681:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return R}});var a=t(59499),r=t(67294),l=t(50029),o=t(17674),i=t(87794),s=t.n(i),c=t(93967),u=t.n(c),d=t(67510),_=t(2179),p=t(64061),m=t.n(p),v=t(48755),f=t(89370),x=t(80818),h=t(38181),g=t(73371),b=t(92633),j=t(5078),P=t.n(j),y=t(85893),I=function(e){var n=e.poll,t=e.analyticsParams,a=d.Z.services.api,i=(0,g.SE)(),c=i.profile,p=i.loadingProfile,j=i.isLoggedIn,I=n.displayTitle,w=n.answer,C=n.contentfulId,N=w.slice(0,4),T=(0,r.useState)(!1),k=T[0],F=T[1],O=(0,r.useState)(null),S=O[0],L=O[1],A=(0,r.useState)(null),Z=A[0],E=A[1],D=(0,r.useState)(null),H=D[0],B=D[1],z=(0,r.useState)(!0),M=z[0],X=z[1],q=t.verticalIndex,R=t.horizontalIndexOffset,U="".concat(v.B3,"-").concat(C),V=(0,f.YD)({threshold:.1,triggerOnce:!0}),W=(0,o.Z)(V,2),Y=W[0],Q=W[1],G=function(e){return(e/Z*100).toFixed(0)},J=function(){var e=(0,l.Z)(s().mark((function e(){var n,t,r,l,o,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a().query({query:h.IG,variables:{pollId:C}});case 3:r=e.sent,l=r.data,o=null===l||void 0===l||null===(n=l.aggregatedPollResult)||void 0===n||null===(t=n.answers)||void 0===t?void 0:t.reduce((function(e,n){return e+n.count}),0),i=N.map((function(e){var n,t=null===l||void 0===l||null===(n=l.aggregatedPollResult)||void 0===n?void 0:n.answers.find((function(n){return n.answer===e}));return{answer:e,count:(null===t||void 0===t?void 0:t.count)||0}})),L(i),E(o),F(!0),X(!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m().notify(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=(0,l.Z)(s().mark((function e(n){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={pollId:C,pollAnswer:n,hogwartsHouse:(null===c||void 0===c?void 0:c.hogwartsHouse)||"unsorted"},e.prev=1,e.next=4,a().mutate({mutation:h.hw,variables:{input:t}});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),m().notify(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(n){return e.apply(this,arguments)}}(),$=function(){var e=(0,l.Z)(s().mark((function e(t,a){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,x.uH)({destination_url:window.location.pathname,label:"Poll Submitted",location:"Poll",vertical_index:q,horizontal_index:a+R,content_name:I},n),!j){e.next=8;break}return e.next=4,K(t);case 4:B(t),J(),e.next=11;break;case 8:localStorage.setItem(U,t),B(t),J();case 11:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),ee=function(){var e=(0,l.Z)(s().mark((function e(){var n,t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a().query({query:h.hn,variables:{pollId:C}});case 3:n=e.sent,(t=n.data).pollResult?(B(t.pollResult.pollAnswer),J()):X(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),m().notify(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){if(!p)if(j)ee();else{var e=localStorage.getItem(U);e?(B(e),J()):X(!1)}}),[p,j]),(0,y.jsx)("div",{className:u()(P().root,Q?P().isInView:""),ref:Y,children:(0,y.jsxs)("div",{className:P().textContainer,children:[(0,y.jsx)("div",{className:P().header,children:"Poll"}),M&&(0,y.jsxs)("div",{"data-testid":"loading-skeleton",children:[(0,y.jsx)(_.Z,{animation:"scroll-indicator",animationData:b,ariaLabel:"Animated scroll indicator",className:P().scrollIndicator}),(0,y.jsx)("div",{className:P().answerSkeleton,children:N.map((function(e,n){return(0,y.jsx)("div",{className:P().answerItem},n)}))})]}),!M&&(0,y.jsx)("div",{className:P().question,children:I}),!M&&!k&&(0,y.jsx)("div",{className:P().options,"data-testid":"options",children:N.map((function(e,n){return(0,y.jsx)("button",{type:"button",className:P().option,onClick:function(){$(e,n)},children:e},e)}))}),!M&&k&&(0,y.jsx)("div",{className:P().results,"data-testid":"results",children:S.map((function(e,n){return(0,y.jsxs)("div",{className:u()(P().option,e.answer===H?P().selected:""),children:[(0,y.jsxs)("div",{className:P().optionTextContainer,children:[(0,y.jsx)("div",{children:e.answer}),(0,y.jsx)("div",{className:P().percentage,children:"".concat(G(e.count),"%")})]}),(0,y.jsx)("div",{className:P().progressBarContainer,style:{"--percentage":"".concat(G(e.count),"%")},children:(0,y.jsx)("div",{className:P().progress})})]},n)}))})]})})};I.defaultProps={analyticsParams:{}};var w=I,C=t(70951),N=t(76444),T=t.n(N),k=function(e){var n=e.content,t=e.header,a=e.subHeader,r=e.analyticsParams.verticalIndex,l=n.slice(0,4);return(0,y.jsxs)("div",{className:T().root,children:[(t||a)&&(0,y.jsxs)("div",{className:T().heading,children:[t&&(0,y.jsx)("div",{className:T().header,children:t}),a&&(0,y.jsx)("div",{className:T().subHeader,children:a})]}),(0,y.jsx)("div",{className:T().contentTiles,children:l.map((function(e,n){return(0,y.jsx)(C.Z,{compact:!0,content:e,analyticsParams:{horizontalIndex:n,verticalIndex:r}},e.externalId)}))})]})};k.defaultProps={header:"",subHeader:"",analyticsParams:{}};var F=k,O=t(13359),S=t.n(O),L=t(11163),A=t(31107),Z=t(20465),E=t(56569),D=t(79714),H=t.n(D),B=function(e){var n,t=e.content,a=e.analyticsParams,l=t.header,o=t.cta,i=t.image,s=t.ctaUrl,c=(0,L.useRouter)(),u=a.verticalIndex,d=a.horizontalIndexOffset,_=(0,Z.L)(),p=(0,r.useState)(!1),m=p[0],v=p[1];(0,r.useEffect)((function(){v(_<E.A.lg)}),[_]);var f=function(){(0,x.uH)({destination_url:s,label:"Flexible Image CTA Clicked",location:"FlexibleImageCTA",vertical_index:u,horizontal_index:d,content_name:l},t),c.push(s)};return(0,y.jsx)("div",{onClick:function(){return f()},"data-testid":"cta-link",onKeyDown:function(e){"Enter"===e.key&&f()},role:"button",tabIndex:-1,children:(0,y.jsx)("div",{className:H().root,style:{backgroundImage:"url(".concat(null===i||void 0===i||null===(n=i.file)||void 0===n?void 0:n.url,")")},children:l&&o&&(0,y.jsxs)("div",{className:H().ctaContent,"data-testid":"cta-content",children:[(0,y.jsx)("div",{className:H().header,children:l}),(0,y.jsx)("div",{className:H().cta,children:(0,y.jsx)(A.ZP,{"aria-label":o,label:o,theme:"modern",level:"primary",color:"purple",size:m?"small":"large"})})]})})})};B.defaultProps={analyticsParams:{}};var z=B;function M(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function X(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?M(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):M(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var q=function(e){var n=e.contentSlots,t=e.header,a=e.subheader,r=e.analyticsParams,l=function(){var e=n[0];switch(e.contentTypeId){case v.X7.MULTI_TILE_PROMO:var t;return Math.min(null===e||void 0===e||null===(t=e.contentSlots)||void 0===t?void 0:t.length,4)||0;case v.X7.POLL:var a;return Math.min(null===e||void 0===e||null===(a=e.answer)||void 0===a?void 0:a.length,4)||0;case v.X7.FLEXIBLE_IMAGE_CTA:return 1;default:return 0}},o=function(e,n){var t=X(X({},r),{},{horizontalIndexOffset:n>0?l():0});switch(e.contentTypeId){case v.X7.MULTI_TILE_PROMO:return(0,y.jsx)(F,{content:e.contentSlots,analyticsParams:t});case v.X7.POLL:return(0,y.jsx)(w,{poll:e,analyticsParams:t});case v.X7.FLEXIBLE_IMAGE_CTA:return(0,y.jsx)(z,{content:e,analyticsParams:t});default:return null}};return(0,y.jsxs)("div",{className:S().root,children:[(t||a)&&(0,y.jsxs)("div",{className:S().heading,children:[t&&(0,y.jsx)("div",{className:S().header,children:t}),a&&(0,y.jsx)("div",{className:S().subHeader,children:a})]}),(0,y.jsx)("div",{className:S().twoColumn,children:n.map((function(e,n){return(0,y.jsx)("div",{className:[null!==e&&void 0!==e&&e.contentTypeId?S()[e.contentTypeId]:""].join(" "),children:o(e,n)},e.contentfulId)}))})]})};q.defaultProps={header:"",subheader:"",analyticsParams:{}};var R=q},14038:function(e){e.exports={image:"ContentTile_image__7iVUv",imageWrapper:"ContentTile_imageWrapper__ZwZmd",footer:"ContentTile_footer__XW22D",info:"ContentTile_info__7mFDx",title:"ContentTile_title__MkFmL",eyebrow:"ContentTile_eyebrow__SHxcv",compact:"ContentTile_compact__T4xB8"}},13359:function(e){e.exports={root:"FlexibleContainer_root__5FSdq",twoColumn:"FlexibleContainer_twoColumn__CUgAA",contentList:"FlexibleContainer_contentList__l4fwr",poll:"FlexibleContainer_poll__yFNJ8",flexibleContainerImageCTA:"FlexibleContainer_flexibleContainerImageCTA___HBpc",heading:"FlexibleContainer_heading__YHLuX",header:"FlexibleContainer_header__WkZ9R",subHeader:"FlexibleContainer_subHeader__oIQ8F"}},79714:function(e){e.exports={root:"FlexibleImageCTA_root__2DB0e",ctaContent:"FlexibleImageCTA_ctaContent__38mD2",header:"FlexibleImageCTA_header__EVMvH",cta:"FlexibleImageCTA_cta__jQgUc"}},76444:function(e){e.exports={root:"FourTile_root__k6Veh",contentTiles:"FourTile_contentTiles__hKLFQ"}},5078:function(e){e.exports={root:"Poll_root__569bu",isInView:"Poll_isInView__73mDc",options:"Poll_options__fi92x",option:"Poll_option__0BlYD",fillBackground:"Poll_fillBackground__YhkR6",results:"Poll_results__Dacd6",progress:"Poll_progress__S8hBj",progressFill:"Poll_progressFill__sz34k",textContainer:"Poll_textContainer___1hNo",header:"Poll_header__WLthq",question:"Poll_question__jDnD6",selected:"Poll_selected__c0o2Z",optionTextContainer:"Poll_optionTextContainer__BrZ8s",percentage:"Poll_percentage__0YZ9m",progressBarContainer:"Poll_progressBarContainer__0ffIp",answerSkeleton:"Poll_answerSkeleton__J2zNz",answerItem:"Poll_answerItem__6rl8_"}}}]);
//# sourceMappingURL=4681-73fd4152a98e575b.js.map